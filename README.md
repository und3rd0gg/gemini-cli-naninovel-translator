# Инструмент автоматического перевода сценариев (Gemini CLI)

Этот инструмент представляет собой Python-скрипт для автоматического перевода файлов сценариев/диалогов (в формате CSV) с русского языка на другие языки с использованием модели Gemini.

Он идеально подходит для локализации игр (например, визуальных новелл) или историй, где важно сохранение контекста и тона повествования.

## Основные возможности

*   **Контекстный перевод:** Отправляет диалоги блоками, чтобы Gemini могла учитывать контекст всей сцены при переводе.
*   **Пакетная обработка:** Может обрабатывать как отдельные файлы, так и целые папки (рекурсивно), сохраняя структуру директорий.
*   **Выбор языка:** Перевод на все языки, указанные в заголовке CSV, или только на конкретный выбранный язык.
*   **Совместимость с Windows:** Скрипт специально настроен для работы через `gemini.cmd`, что решает проблемы с политиками выполнения PowerShell.

## Требования

1.  **Python 3.x**: Должен быть установлен в системе.
2.  **Gemini CLI**: Инструмент командной строки `gemini` должен быть установлен, настроен (API ключ) и доступен в системном PATH.

## Формат входных данных (CSV)

Скрипт ожидает CSV-файлы со следующей структурой:
*   Первая строка — заголовок.
*   Обязательно должен присутствовать столбец с названием `ru` (исходный текст).
*   Остальные столбцы в заголовке (справа от `ru`) воспринимаются как коды целевых языков (например, `en`, `jp`, `fr`).

**Пример CSV:**
```csv
ID,Notes,ru,en,jp
line1,,Привет!,Hello!,
line2,,Как дела?,How are you?,
```

## Инструкция по использованию

Запускайте скрипт через командную строку (терминал).

### 1. Базовый запуск
По умолчанию скрипт ищет папку `scenarios` в текущей директории и переводит все найденные в ней CSV файлы на все языки, указанные в заголовках файлов.

```bash
python translate_scenarios.py
```

### 2. Указание входного пути
Вы можете указать конкретную папку или файл для перевода.

**Перевод конкретной папки:**
```bash
python translate_scenarios.py path/to/my_folder
```

**Перевод конкретного файла:**
```bash
python translate_scenarios.py path/to/my_folder/dialogue.csv
```

### 3. Выбор конкретного языка
Используйте флаг `--lang`, чтобы перевести только на один определенный язык (код языка должен совпадать с заголовком в CSV). Это полезно, если вы добавили новый язык или хотите обновить только его.

**Пример (перевод только на английский):**
```bash
python translate_scenarios.py --lang en
```

**Комбинированный пример (перевод файла chapter1.csv только на японский):**
```bash
python translate_scenarios.py scenarios/chapter1.csv --lang jp
```

## Результат работы

Скрипт создает копию входных данных с суффиксом `_translated`. Исходные файлы не перезаписываются.

*   Если на вход подана папка `scenarios`, результат будет в `scenarios_translated`.
*   Если на вход подан файл `data/story.csv`, результат будет в папке `data_translated/story.csv`.

Внутри выходной папки полностью сохраняется структура вложенных папок исходной директории.